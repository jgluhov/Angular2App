@import './variables.styl'

$boxWidth = 150px
$boxHeight = 150px

$largeCircleColor = $colorCobalt
$mediumCircleColor = $colorRed
$smallCircleColor = $colorOrange

$largeCircleAnimationTime = 2s
$mediumCircleAnimationTime = 3s
$smallCircleAnimationTime = 1.5s

$elementsTransitionFn =  cubic-bezier(0.645, 0.045, 0.355, 1.000)
$elementsTransition = 'all .3s %s' % $elementsTransitionFn

$sectionHeight = 100%
$sectionWidth = 50%
$sectionBackgroundColor = $colorSoSleepy

$sectionAnimationTime = .7s
$sectionDelayAnimationTime = .3s
$sectionTransitionFn = cubic-bezier(0.645, 0.045, 0.355, 1.000)
$sectionTransition = "transform %s %s %s" % ($sectionAnimationTime $sectionDelayAnimationTime $sectionTransitionFn)

set-box-position(n)
  top n
  left n
  right n
  bottom n

set-box-animation(time)
  animation 'spin %s linear infinite' % time

#loader
  position fixed
  top 0
  left 0
  width 100%
  height 100%
  z-index 1000
  display flex
  align-items center
  justify-content center

  > .loader-elements,
  > .loader-elements:before,
  > .loader-elements:after
    border 3px solid transparent
    border-radius 50%

  > .loader-elements
    display block
    width $boxWidth
    height $boxHeight
    border-top-color $largeCircleColor
    z-index 1500
    set-box-animation($largeCircleAnimationTime)
    transition $elementsTransition
    opacity 1

    &:before, &:after
      content ''
      position absolute

    &:before
      set-box-position(5px)
      border-top-color $mediumCircleColor
      set-box-animation($mediumCircleAnimationTime)

    &:after
      set-box-position(15px)
      border-top-color $smallCircleColor
      set-box-animation($smallCircleAnimationTime)

  > .loader-section
    position fixed
    top 0
    width $sectionWidth
    height $sectionHeight
    background $sectionBackgroundColor
    z-index 1000
    transition $sectionTransition

    &.left
      left 0

    &.right
      right 0

  &.loaded
    > .loader-elements
      opacity 0
    > .loader-section
      animation shadow
      animation-delay .3s
      animation-duration 0
      animation-timing-function $sectionTransition
      animation-iteration-count 1
      &.left
        transform translateX(-100%)
      &.right
        transform translateX(100%)


@keyframes spin
  from
    transform rotateZ(0deg)
  to
    transform rotateZ(360deg)

@keyframes shadow
  from
    box-shadow none
  to
    box-shadow 0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset

